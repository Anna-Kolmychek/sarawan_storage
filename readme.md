# Магазин продуктов

## Запуск проекта
1. Клонируйте исходники прокета:
```
git clone https://github.com/Anna-Kolmychek/sarawan_storage.git
```

2. Установите виртуальное окружение и зависимости из файла `requirements.txt`.
```
pip3 install -r requirements.txt
```

3. Создайте файл `.env` по образцу `.env_sample`


4. Создайте пустую базу данных с именем, который указали в файле `.env` (при локольном входе в `postgresql` без пароля):
```
psql -U postgres
create database [ИМЯ БД];
\q
```

5. Примените миграции
```
python3 manage.py migrate
```

6. Создайте администратора, при желании создайте пользователей
```
python3 manage.py create_su
python3 manage.py create_users
```

Будут созданы пользователи (и необходимые группы)
- администратор (логин: `admin@email.com`, пароль: `12345`)
- пользователи
  - (логин: `user1@email.com`, пароль: `12345`)
  - (логин: `user2@email.com`, пароль: `12345`)


7. Запустите сервер
```
python3 manage.py runserver
```

## Работа в проекте

- В админке (при локальном запуске `http://localhost:8000/admin/`) под созданным администратором можно
  - создавать, редактировать, удалять категории и подкатегории товаров
    - категории и подкатегории имеют названия, slug, превью 
    - подкатегория обязательно должны быть связаны с категориями 
  - создавать, редактировать, удалять продукты
    - продукты имеют названия, slug, 3 изображения (опционально), цену
    - продукт связан с подкатегорией (и через нее с категорией)


- Реализована авторизация по токену
```
# POST запрос на URL
http://localhost:8000/token/

# body (пример)
{
    "email": "user1@email.com",
    "password": "12345"
}
```

- Реализован эндпоинт для просмотра всех категорий с подкатегориями. Доступен всем пользователям
```
# GET запрос на URL
http://localhost:8000/categories/
```
- Реализован эндпоинт для просмотра всех продуктов. Для продукта добавлено отображение категории и подкатегории. Доступен всем пользователям
```
# GET запрос на URL
http://localhost:8000/products/
```
- Реализован эндпоинт для добавления, изменения, удаления продукта в корзину.
Доступен только авторизованным пользователям. Работа ведется с корзиной текущего пользователя.
```
# POST, PUT, DELETE запросы на URL
http://localhost:8000/cart-items/
http://localhost:8000/cart-items/<pk>

# body (пример)
{
    "product": 1,
    "quantity": 3
}
```
- Реализован эндпоинт для вывода состава корзины. Добавлено общее количество товаров в корзине и общая стоимость всех товаров.
Для этого эндпоинта убрана пагинация. Эндпоинт доступен только авторизованным пользователям. Работа ведется с корзиной текущего пользователя.
```
# GET запрос на URL
http://localhost:8000/carts/
```

- Реализован эндпоинт для полной очистки корзины.
Эндпоинт доступен только авторизованным пользователям. Работа ведется с корзиной текущего пользователя.
```
# DELETE запрос на URL
http://localhost:8000/carts/delete/
```

- Для всех эндпоинтов по умолчанию добавлена пагинация

## Использован стэк
- Django
- DRF
- PostgreSQL

